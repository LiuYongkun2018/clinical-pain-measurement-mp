<view class="dashboard-container">
  <!-- æ¬¢è¿åŒºåŸŸ -->
  <view class="welcome-section">
    <view class="welcome-header">
      <text class="welcome-title">æ‚¨å¥½ï¼Œ{{userName}}</text>
      <text class="welcome-date">{{currentDate}}</text>
    </view>
    <text class="welcome-subtitle">è®©æˆ‘ä»¬ä¸€èµ·ç®¡ç†ç–¼ç—›ï¼Œé‡æ‹¾å¥åº·ç”Ÿæ´»</text>
  </view>

  <!-- ç–¼ç—›çŠ¶æ€å¡ç‰‡ -->
  <view class="status-cards">
    <!-- å½“å‰ç–¼ç—›åº¦ -->
    <view class="status-card pain-level-card">
      <view class="card-header">
        <text class="card-title">ç–¼ç—›åº¦</text>
        <text class="card-value">{{currentPainLevel}}</text>
      </view>
      <view class="pain-scale">
        <view class="scale-bar">
          <view class="scale-fill" style="width: {{currentPainLevel * 10}}%"></view>
        </view>
        <text class="scale-label">0 - æ— ç—›    10 - å‰§çƒˆç–¼ç—›</text>
      </view>
    </view>

    <!-- è¿ç»­è®°å½•å¤©æ•° -->
    <view class="status-card">
      <view class="card-icon streak-icon">ğŸ”¥</view>
      <view class="card-content">
        <text class="card-number">{{consecutiveDays}}</text>
        <text class="card-label">è¿ç»­è®°å½•å¤©æ•°</text>
      </view>
    </view>

    <!-- å®Œæˆè¯¾ç¨‹æ•° -->
    <view class="status-card">
      <view class="card-icon course-icon">ğŸ“š</view>
      <view class="card-content">
        <text class="card-number">{{completedCourses}}</text>
        <text class="card-label">å·²å®Œæˆè¯¾ç¨‹</text>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥ä»»åŠ¡ -->
  <view class="today-tasks">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥ä»»åŠ¡</text>
      <text class="section-subtitle">{{todayProgress.completed}}/{{todayProgress.total}} å·²å®Œæˆ</text>
    </view>
    
    <view class="task-list">
      <view class="task-item {{item.completed ? 'completed' : ''}}" wx:for="{{todayTasks}}" wx:key="id" bindtap="toggleTask" data-id="{{item.id}}">
        <view class="task-checkbox">
          <view class="checkbox {{item.completed ? 'checked' : ''}}">
            <text class="checkmark" wx:if="{{item.completed}}">âœ“</text>
          </view>
        </view>
        <view class="task-content">
          <text class="task-title">{{item.title}}</text>
          <text class="task-description">{{item.description}}</text>
        </view>
        <view class="task-icon">{{item.icon}}</view>
      </view>
    </view>
  </view>

  <!-- ç–¼ç—›è¶‹åŠ¿å›¾è¡¨ -->
  <view class="pain-chart">
    <view class="section-header">
      <text class="section-title">ç–¼ç—›è¶‹åŠ¿</text>
      <text class="section-subtitle">è¿‡å»7å¤©</text>
    </view>
    <view class="chart-container">
      <canvas class="chart-canvas" canvas-id="painChart" id="painChart"></canvas>
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="quick-actions">
    <view class="action-button" bindtap="recordPain">
      <view class="action-icon">ğŸ“</view>
      <text class="action-text">è®°å½•ç–¼ç—›</text>
    </view>
    <view class="action-button" bindtap="startMindfulness">
      <view class="action-icon">ğŸ§˜</view>
      <text class="action-text">æ­£å¿µç»ƒä¹ </text>
    </view>
    <view class="action-button" bindtap="viewCourses">
      <view class="action-icon">ğŸ“–</view>
      <text class="action-text">å­¦ä¹ è¯¾ç¨‹</text>
    </view>
    <view class="action-button" bindtap="emotionLog">
      <view class="action-icon">ğŸ’­</view>
      <text class="action-text">æƒ…ç»ªæ—¥å¿—</text>
    </view>
  </view>
</view>
