<view class="dashboard-container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar" style="height: {{navBarHeight}}rpx; padding-top: {{statusBarHeight}}rpx;">
    <view class="navbar-content">
      <view class="back-button" bindtap="goBack">
        <text class="back-icon">â€¹</text>
      </view>
      <view class="navbar-title">ç–¼ç—›ç®¡ç†</view>
      <view class="navbar-actions">
        <view class="notification-button" bindtap="showNotifications">
          <text class="notification-icon">ğŸ””</text>
          <view class="notification-badge" wx:if="{{hasUnreadNotifications}}"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-wrapper" style="padding-top: {{navBarHeight}}rpx;">
    <!-- æ¬¢è¿åŒºåŸŸ -->
    <view class="welcome-section">
      <view class="welcome-header">
        <text class="welcome-title">æ‚¨å¥½ï¼Œ{{userName}}</text>
        <text class="welcome-date">{{currentDate}}</text>
      </view>
      <text class="welcome-subtitle">è®©æˆ‘ä»¬ä¸€èµ·ç®¡ç†ç–¼ç—›ï¼Œé‡æ‹¾å¥åº·ç”Ÿæ´»</text>
    </view>

  <!-- ç–¼ç—›çŠ¶æ€å¡ç‰‡ -->
  <view class="status-cards">
    <!-- å½“å‰ç–¼ç—›åº¦ -->
    <view class="status-card pain-level-card">
      <view class="card-header">
        <text class="card-title">ç–¼ç—›åº¦</text>
        <text class="card-value">{{currentPainLevel}}</text>
      </view>
      <view class="pain-scale">
        <view class="scale-bar">
          <view class="scale-fill" style="width: {{currentPainLevel * 10}}%"></view>
        </view>
        <text class="scale-label">0 - æ— ç—›    10 - å‰§çƒˆç–¼ç—›</text>
      </view>
    </view>

    <!-- è¿ç»­è®°å½•å¤©æ•° -->
    <view class="status-card streak-card">
      <view class="card-icon streak-icon">ğŸ”¥</view>
      <view class="card-content">
        <text class="card-number">{{consecutiveDays}}</text>
        <text class="card-label">è¿ç»­è®°å½•å¤©æ•°</text>
      </view>
    </view>

    <!-- å®Œæˆè¯¾ç¨‹æ•° -->
    <view class="status-card course-card">
      <view class="card-icon course-icon">ğŸ“š</view>
      <view class="card-content">
        <text class="card-number">{{completedCourses}}</text>
        <text class="card-label">å·²å®Œæˆè¯¾ç¨‹</text>
      </view>
    </view>
  </view>

  <!-- ç–¼ç—›ç§‘æ™®è§†é¢‘ -->
  <view class="education-video">
    <view class="section-header">
      <text class="section-title">ç–¼ç—›ç§‘æ™®</text>
      <text class="section-subtitle">äº†è§£ç–¼ç—›ç®¡ç†çŸ¥è¯†</text>
    </view>
    
    <view class="video-card" bindtap="playEducationVideo">
      <view class="video-container">
        <image class="video-poster" src="cloud://cloud1-0ghb31rxf59a59fa.636c-cloud1-0ghb31rxf59a59fa-1307936480/pain_video_poster.jpg" mode="aspectFill"></image>
        <view class="video-play-btn">
          <image class="play-icon" src="/images/icons/play.svg"></image>
        </view>
        <view class="video-duration">12:30</view>
      </view>
      <view class="video-info">
        <text class="video-title">è®¤çŸ¥è¡Œä¸ºç–—æ³•ï¼šæ”¹å˜å¯¹ç–¼ç—›çš„è®¤çŸ¥</text>
        <text class="video-description">äº†è§£å¦‚ä½•é€šè¿‡è®¤çŸ¥é‡æ„æ¥ç®¡ç†æ…¢æ€§ç–¼ç—›</text>
        <view class="video-meta">
          <text class="video-views">{{videoInfo.views}}æ¬¡è§‚çœ‹</text>
          <text class="video-tag">ä¸“ä¸šæ¨è</text>
          <text class="video-level">åˆçº§</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥ä»»åŠ¡ -->
  <view class="today-tasks">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥ä»»åŠ¡</text>
      <text class="section-subtitle">{{todayProgress.completed}}/{{todayProgress.total}} å·²å®Œæˆ</text>
    </view>
    
    <view class="task-list">
      <view class="task-item {{item.completed ? 'completed' : ''}}" wx:for="{{todayTasks}}" wx:key="id" bindtap="toggleTask" data-id="{{item.id}}">
        <view class="task-checkbox">
          <view class="checkbox {{item.completed ? 'checked' : ''}}">
            <text class="checkmark" wx:if="{{item.completed}}">âœ“</text>
          </view>
        </view>
        <view class="task-content">
          <text class="task-title">{{item.title}}</text>
          <text class="task-description">{{item.description}}</text>
        </view>
        <view class="task-icon">{{item.icon}}</view>
      </view>
    </view>
  </view>

  <!-- ç–¼ç—›è¶‹åŠ¿å›¾è¡¨ -->
  <view class="pain-chart">
    <view class="section-header">
      <text class="section-title">ç–¼ç—›è¶‹åŠ¿</text>
      <text class="section-subtitle">è¿‡å»7å¤©</text>
    </view>
    <view class="chart-container">
      <canvas class="chart-canvas" canvas-id="painChart" id="painChart"></canvas>
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="quick-actions">
    <view class="action-button record-pain-btn" bindtap="recordPain">
      <view class="action-icon">ğŸ“</view>
      <text class="action-text">è®°å½•ç–¼ç—›</text>
    </view>
    <view class="action-button mindfulness-btn" bindtap="startMindfulness">
      <view class="action-icon">ğŸ§˜</view>
      <text class="action-text">æ­£å¿µç»ƒä¹ </text>
    </view>
    <view class="action-button courses-btn" bindtap="viewCourses">
      <view class="action-icon">ğŸ“–</view>
      <text class="action-text">å­¦ä¹ è¯¾ç¨‹</text>
    </view>
    <view class="action-button emotion-btn" bindtap="emotionLog">
      <view class="action-icon">ğŸ’­</view>
      <text class="action-text">æƒ…ç»ªæ—¥å¿—</text>
    </view>
  </view>
  </view>
</view>
